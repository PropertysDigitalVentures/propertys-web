(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{nuUO:function(t,e,r){"use strict";r.r(e),r.d(e,"RentModule",function(){return S});var s=r("tyNb"),i=r("ofXK"),c=r("6NWb"),o=r("mrSG"),n=r("AytR"),a=r("fXoL"),d=r("cIOH"),h=r("q9MP"),u=r("0IaG"),l=r("bzJk"),P=r("mpho");function y(t,e){if(1&t&&(a.Sb(0,"tr"),a.Sb(1,"td"),a.xc(2),a.Rb(),a.Sb(3,"td",3),a.xc(4),a.Rb(),a.Rb()),2&t){const t=e.$implicit;a.Cb(2),a.zc(" ",t.address," "),a.Cb(2),a.zc(" ",t.amount," ")}}let p=(()=>{class t{constructor(t,e,r){this.smartContractCoreService=t,this.eventMessengerService=e,this._dialog=r,this.streetViewToggled=!0,this.districtViewToggled=!0,this.cityViewToggled=!0,this.brixClaimLoading=!1,this.loadingPropertys=!0,this.isOnMainnet=!0,this.brixEarnedBreakdown=[],this.propertysHolders=["0x75dd8773c3dbc4e3346838fffd526043e07f59bd","0x302f23818ecc618f728beb5383195fc146123fc1","0x574a782a00dd152d98ff85104f723575d870698e","0x8983ad6d63d7ab3701d74e1e72fd9dadf113f3f9","0x6cc6f59f7016a83e1d7c5fad30cdd8c4cdb4aad1"],this.brixPropertyBonuses={"X AE X-II":{house:80,street:650,district:1600,city:4300},"Blue Bayside":{house:60,street:550,district:1e3,city:2e3},"Purple Palms":{house:50,street:500,district:900,city:1800},"Green Grove":{house:40,street:450,district:800,city:1600},"Yellow Yards":{house:30,street:400,district:700,city:1400},"Orange Oasis":{house:20,street:350,district:600,city:1200},"Beige Bay":{house:10,street:300,district:500,city:1e3},"Question Cat":{house:1200,street:0,district:0,city:0},"The Sunken City":{house:1200,street:0,district:0,city:0},"Le Tower":{house:1200,street:0,district:0,city:0},"Ancient Labyrinth":{house:1200,street:0,district:0,city:0},"Mount Proper":{house:1200,street:0,district:0,city:0},"Great Temple of Peter":{house:1200,street:0,district:0,city:0},"The Emperors Arena":{house:1200,street:0,district:0,city:0},"Secret Glass Pyramid":{house:1200,street:0,district:0,city:0},"The Money Pool":{house:1200,street:0,district:0,city:0},"Fort in the Leaves":{house:1200,street:0,district:0,city:0},"The Impossible Bridge":{house:600,street:0,district:0,city:0},"Peter's Great Wall":{house:600,street:0,district:0,city:0},"Candy Castle":{house:600,street:0,district:0,city:0},"Property's Stadium":{house:600,street:0,district:0,city:0},"Cathedral of Wisdom":{house:600,street:0,district:0,city:0},"Palace of Eternity":{house:600,street:0,district:0,city:0},"Spiky Singers":{house:250,street:0,district:0,city:0},"The Guardian":{house:250,street:0,district:0,city:0},"Casa Blanca":{house:250,street:0,district:0,city:0},"Mystic Rocks":{house:250,street:0,district:0,city:0}},this.neededPropertysForCompletion={"X AE X-II":{housesPerStreet:7,streetsPerDistrict:3,districtsPerCity:3},"Blue Bayside":{housesPerStreet:7,streetsPerDistrict:3,districtsPerCity:3},"Purple Palms":{housesPerStreet:7,streetsPerDistrict:3,districtsPerCity:4},"Green Grove":{housesPerStreet:7,streetsPerDistrict:3,districtsPerCity:4},"Yellow Yards":{housesPerStreet:7,streetsPerDistrict:3,districtsPerCity:4},"Orange Oasis":{housesPerStreet:7,streetsPerDistrict:3,districtsPerCity:5},"Beige Bay":{housesPerStreet:7,streetsPerDistrict:3,districtsPerCity:5},"Question Cat":{housesPerStreet:1,streetsPerDistrict:0,districtsPerCity:0},"The Sunken City":{housesPerStreet:1,streetsPerDistrict:0,districtsPerCity:0},"Le Tower":{housesPerStreet:1,streetsPerDistrict:0,districtsPerCity:0},"Ancient Labyrinth":{housesPerStreet:1,streetsPerDistrict:0,districtsPerCity:0},"Mount Proper":{housesPerStreet:1,streetsPerDistrict:0,districtsPerCity:0},"Great Temple of Peter":{housesPerStreet:1,streetsPerDistrict:0,districtsPerCity:0},"The Emperors Arena":{housesPerStreet:1,streetsPerDistrict:0,districtsPerCity:0},"Secret Glass Pyramid":{housesPerStreet:1,streetsPerDistrict:0,districtsPerCity:0},"The Money Pool":{housesPerStreet:1,streetsPerDistrict:0,districtsPerCity:0},"Fort in the Leaves":{housesPerStreet:1,streetsPerDistrict:0,districtsPerCity:0},"The Impossible Bridge":{housesPerStreet:5,streetsPerDistrict:0,districtsPerCity:0},"Peter's Great Wall":{housesPerStreet:5,streetsPerDistrict:0,districtsPerCity:0},"Candy Castle":{housesPerStreet:5,streetsPerDistrict:0,districtsPerCity:0},"Property's Stadium":{housesPerStreet:5,streetsPerDistrict:0,districtsPerCity:0},"Cathedral of Wisdom":{housesPerStreet:5,streetsPerDistrict:0,districtsPerCity:0},"Palace of Eternity":{housesPerStreet:5,streetsPerDistrict:0,districtsPerCity:0},"Spiky Singers":{housesPerStreet:20,streetsPerDistrict:0,districtsPerCity:0},"The Guardian":{housesPerStreet:20,streetsPerDistrict:0,districtsPerCity:0},"Casa Blanca":{housesPerStreet:20,streetsPerDistrict:0,districtsPerCity:0},"Mystic Rocks":{housesPerStreet:20,streetsPerDistrict:0,districtsPerCity:0}},this.accounts=[]}ngOnInit(){return Object(o.a)(this,void 0,void 0,function*(){yield this.checkMetaMaskInstalled(),yield this.checkChain(),this.eventMessengerService.subscribe("accountsChanged",t=>Object(o.a)(this,void 0,void 0,function*(){let{accounts:e}=t.data;this.accounts=e,yield this.checkChain()})),this.eventMessengerService.subscribe("disconnect",t=>Object(o.a)(this,void 0,void 0,function*(){let{accounts:e}=t.data;this.accounts=e,yield this.checkChain()})),this.propertysHolders.forEach(t=>{this.loadPropertys(t)})})}checkChain(){return Object(o.a)(this,void 0,void 0,function*(){if(this.smartContractCoreService.isMetaMaskInstalled()){const{chainId:t}=yield this.smartContractCoreService.provider.getNetwork();n.a.chainId===t?this.isOnMainnet=!0:(this.isOnMainnet=!1,this.loading=!1)}else this.isOnMainnet=!1,this.loading=!1})}checkMetaMaskInstalled(){return Object(o.a)(this,void 0,void 0,function*(){this.smartContractCoreService.isMetaMaskInstalled()?(this.isMetaMaskInstalled=!0,this.accounts=yield this.smartContractCoreService.getWalletAccounts()):this.isMetaMaskInstalled=!1})}isStreetComplete(t){return t.length===this.neededPropertysForCompletion[t[0].city].housesPerStreet}isDistrictComplete(t){return t.streets.length===this.neededPropertysForCompletion[t.city].streetsPerDistrict}isCityComplete(t){return t.districts.length===this.neededPropertysForCompletion[t.name].districtsPerCity}getRemainingDistrictStreetCount(t){return this.neededPropertysForCompletion[t.city].streetsPerDistrict-t.streets.length}getRemainingCityDistrictCount(t){return this.neededPropertysForCompletion[t.name].districtsPerCity-t.districts.length}hasDistricts(t){return t.districts.length>0}hasCities(){let t=0;return this.cities.forEach(e=>{e.districts.length>0&&t++}),t>0}getEarnedBrixAmount(t,e,r){if("street"===t){let t=0;return t+=e.length*this.brixPropertyBonuses[e[0].city].house,this.isStreetComplete(e)&&(t+=this.brixPropertyBonuses[e[0].city].street),t}return"district"===t?r||this.isDistrictComplete(e)?this.brixPropertyBonuses[e.city].district:0:"city"===t?r||e.districts.length-this.neededPropertysForCompletion[e.name].districtsPerCity==0?this.brixPropertyBonuses[e.name].city:0:void 0}getTotalEarnedBrix(t,e,r){let s=0;return t.length>0&&t.forEach(t=>{s+=this.getEarnedBrixAmount("street",t.streets[0])}),e.forEach(t=>{s+=this.getEarnedBrixAmount("district",t)}),r.forEach(t=>{s+=this.getEarnedBrixAmount("city",t)}),s}loadPropertys(t){let e=[],r=[],s=[];this.smartContractCoreService.getNFTsFromAddress(t).subscribe(i=>Object(o.a)(this,void 0,void 0,function*(){this.loading=!1;let c=i.map(t=>{let e={image:t.image_preview_url};for(let r of t.traits)"Special"!==r.trait_type?("Street Name"===r.trait_type&&(e.street=r.value),"District Name"===r.trait_type&&(e.district=r.value),"City Name"===r.trait_type&&(e.city=r.value.trim()),"Unit"===r.trait_type&&(e.unit=r.value)):(console.log("property",r.value),e.street=r.value.trim(),e.district=r.value.trim(),e.city=r.value.trim(),e.unit=r.value.trim());return e});c.forEach(t=>{let i=!1,c=!1,o=!1;e.forEach(e=>{t.street===e.street&&(i=!0)}),r.forEach(e=>{e.name===t.district&&(c=!0)}),s.forEach(e=>{e.name===t.city&&(o=!0)}),i||e.push({street:t.street,district:t.district,city:t.city,units:[],streets:[]}),c||r.push({name:t.district,city:t.city,streets:[]}),o||s.push({name:t.city,districts:[]})}),c.forEach(t=>{e.forEach(e=>{e.street===t.street&&e.units.push(t)})}),e.forEach(t=>{for(;t.units.length;)t.streets.push(t.units.splice(0,this.neededPropertysForCompletion[t.city].housesPerStreet));t.streets.forEach(e=>{e.length===this.neededPropertysForCompletion[e[0].city].housesPerStreet&&r.forEach(r=>{r.name===t.district&&(r.streets.push(e),r.city=t.city)})})}),r.forEach(t=>{t.streets.length===this.neededPropertysForCompletion[t.city].streetsPerDistrict&&s.forEach(e=>{e.name===t.city&&e.districts.push(t)})}),this.brixEarnedBreakdown.push({address:t,amount:this.getTotalEarnedBrix(e,r,s)})}))}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(d.a),a.Nb(h.a),a.Nb(u.b))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-brix-calculator"]],decls:12,vars:1,consts:[[1,"wrapper"],[1,"bonus-breakdown-table"],[4,"ngFor","ngForOf"],["valign","right"]],template:function(t,e){1&t&&(a.Ob(0,"propertys-header"),a.Sb(1,"div",0),a.Sb(2,"h1"),a.xc(3,"$BRIX Calculator"),a.Rb(),a.Sb(4,"table",1),a.Sb(5,"tr"),a.Sb(6,"th"),a.xc(7,"Wallet Address"),a.Rb(),a.Sb(8,"th"),a.xc(9,"Brix Earned"),a.Rb(),a.Rb(),a.wc(10,y,5,2,"tr",2),a.Rb(),a.Rb(),a.Ob(11,"propertys-footer")),2&t&&(a.Cb(10),a.ic("ngForOf",e.brixEarnedBreakdown))},directives:[l.a,i.i,P.a],styles:["[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:100px 0;width:1220px;margin:0 auto;text-align:center;border-radius:10px}[_nghost-%COMP%]   table[_ngcontent-%COMP%]{border:1px solid #eaeaea;width:800px;margin:100px auto}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:15px;border-bottom:1px solid #eaeaea}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{text-align:right}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px;text-align:left;border-bottom:1px solid #eaeaea}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:right}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:0}"]}),t})();var C=r("wSNE"),g=r("vvQE"),b=r("x+EH"),m=r("aNPn"),f=r("VkIy");let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Lb({type:t,bootstrap:[p]}),t.\u0275inj=a.Kb({providers:[{provide:u.d,useValue:{}}],imports:[[i.b,c.a,C.a,g.a,m.a,u.c,f.a,b.a,s.e.forChild([{path:"",component:p}])]]}),t})()}}]);